description: |
  配队列表：青衣-可琳-支援
  作者： 遥酱
  主要更新内容：
  1、青衣在醉花云月转中遇到黄光红光会选择直接释放，而不是闪避打断自己
  2、青衣在使用醉花云月转，以及其他可能的中断闪电五连鞭之后，会使用特殊技续普攻
  3、可琳会根据情况使用特殊技和终结技
  4、丽娜支援之后不会等
  5、如果被打出快速支援，则20秒内优先使用格挡
  6、现在可琳会在连携和终结技期间长按了*

# 基础信息
author: "遥酱"
thanks: ""
homepage: ""
version: "3.3"
team_list:
  - ["青衣", "丽娜", "可琳"]
introduction: "我没凯撒，所以是丽娜"

allow_ultimate:
  - agent_name: "可琳"


#基础配置
check_dodge_interval: 0.01
check_agent_interval: [0.4, 0.6]
check_special_attack_interval: [0.4, 0.6]
check_ultimate_interval: [0.4, 0.6]
check_chain_interval: 0.3
check_quick_interval: 0.2
auto_lock_interval: 1

#通用支援模板 自定义-下格挡
t-zy: &zy
  - states: "[自定义-下格挡,0,1] | "
    operations:
      - op_name: "按键-移动-前"
        way: "松开"
      - op_name: "按键-普通攻击"
        post_delay: 0.1
      - op_name: "按键-切换角色"
        agent_name: "青衣"
  - states: "[按键可用-特殊攻击] & ![自定义-支援-已使用特殊技,0,1]"   
    operations:
      - op_name: "按键-特殊攻击"
        post_delay: 0.1
        repeat: 5
      - op_name: "设置状态"
        state:  "自定义-支援-已使用特殊技"
  #没啥事做A两下
  - states: ""
    operations:
      - op_name: "按键-移动-前"
        way: "松开"
      - op_name: "按键-普通攻击"
        post_delay: 0.1
      - op_name: "按键-切换角色"
        agent_name: "青衣"

#战场模板-击破
t-q: &q
  - states: "[前台-青衣]"
    sub_handlers:
      - states: "[自定义-连携, 0, 6]"
        operations:
          - op_name: "按键-切换角色"
            agent_name: "可琳"

      - states: "[青衣-电压]{80, 101}"
        operations:
          - op_name: "设置状态"
            state: "自定义-青衣-醉花云月转"
          - op_name: "按键-普通攻击"
            way: "按下"
            press: 2.5
            post_delay: 0.5
          - op_name: "设置状态"
            state: "自定义-青衣-特殊技续普攻"
          - op_name: "清除状态"
            state:  "自定义-青衣-普攻次数"
      - states: "[按键可用-终结技] & ![自定义-动作不打断, 0, 30]"
        operations:
          - op_name: "设置状态"
            state: "自定义-动作不打断"
          - op_name: "按键-终结技"
            post_delay: 1
            repeat: 5
          - op_name: "清除状态"
            state: "自定义-动作不打断"
      - states: "![按键可用-特殊攻击] & [自定义-青衣-特殊技续普攻,0,2]"
        operations:
          - operation_template: "通用-闪避-前"
          - op_name: "清除状态"
            state: "自定义-青衣-特殊技续普攻"
          - op_name: "按键-普通攻击"
            post_delay: 0.1
            repeat: 5

      - states: "[按键可用-特殊攻击] & [自定义-青衣-特殊技续普攻,0,2]"
        operations:
          - op_name: "设置状态"
            state: "自定义-青衣-使用特殊技期间"
          - op_name: "按键-特殊攻击"
            post_delay: 0.1
            repeat: 5

      - states: "[青衣-电压]{0, 90}"
        operations:
        - op_name: "按键-普通攻击"
          post_delay: 0.1
          repeat: 20
        - op_name: "设置状态"
          state: "自定义-青衣-特殊技续普攻"

      - states: ""
        operations:
          - op_name: "按键-普通攻击"
            post_delay: 0.1

t-kl: &kl
  - states: "[前台-可琳] & [自定义-连携,0,2]"
    operations:
      - op_name: "按键-普通攻击"
        post_delay: 0.1
        repeat: 20

  - states: "[按键可用-终结技] & [前台-可琳] & [自定义-连携,0,12]"
    operations:
      - op_name: "按键-终结技"
        post_delay: 0.1
        repeat: 10
      - op_name: "按键-普通攻击"
        post_delay: 0.1
        repeat: 30
  
  #可以用特殊技就持续按
  - states: "[按键可用-特殊攻击] & [前台-可琳] & [自定义-连携,2,12] & ![自定义-可琳-这次不打特殊技,0,12]"
    operations:
      - op_name: "清除状态"
        state: "自定义-可琳-这次不打特殊技"
      - op_name: "设置状态"
        state: "自定义-可琳-这次不打特殊技"
      - op_name: "按键-特殊攻击"
        post_delay: 0.1
        repeat: 40

  #没有特殊技可以用
  - states: "![按键可用-特殊攻击] & [自定义-连携,2,12]"  
    operations:
      - op_name: "清除状态"
        state: "自定义-可琳-这次不打特殊技"
      - op_name: "设置状态"
        state: "自定义-可琳-这次不打特殊技"
      - op_name: "按键-普通攻击"
        post_delay: 0.1
        repeat: 10
  
  #连携结束
  - states: "![自定义-连携,0,12]"
    operations:
      - op_name: "按键-切换角色"
        agent_name: "丽娜"
      - op_name: "清除状态"
        state: "自定义-可琳-这次不打特殊技"

  #前台不是可琳
  - states: "![前台-可琳]"
    operations:
    - op_name: "按键-切换角色"
      agent_name: "可琳"
    - op_name: "清除状态"
      state: "自定义-可琳-这次不打特殊技"

#连携模板-上一个
t-up: &up
  - op_name: "按键-连携技-左"
    post_delay: 0.05
  - op_name: "设置状态"
    state: "自定义-连携"

#连携模板-下一个
t-down: &down
  - op_name: "按键-连携技-右"
    post_delay: 0.05
  - op_name: "设置状态"
    state: "自定义-连携"

#连携模板-取消
t-cancel: &cancel
  - op_name: "按键-连携技-取消"
    post_delay: 0.05
  - op_name: "设置状态"
    state: "自定义-连携"

#通用模板-锁定敌人
t-sd: &sd
  - states: "![自定义-锁定敌人, 0, 5]"
    operations:
      - op_name: "设置状态"
        state: "自定义-锁定敌人"
      - op_name: "按键-锁定敌人"
        way: '按下'
        press: 0.02

scenes:
  - triggers: ["按键可用-连携技"]
    priority: 99
    interval: 0.02
    handlers:
      - states: "[连携技-1-丽娜]"
        operations: *up
      - states: "[连携技-2-丽娜]"
        operations: *down
      - states: "[连携技-1-可琳]"
        operations: *up
      - states: "[连携技-2-可琳]"
        operations: *down
      - states: ""
        operations:
          - op_name: "按键-连携技-取消"
            post_delay: 0.1
            repeat: 5

  - triggers: [ "闪避识别-黄光", "闪避识别-红光", "闪避识别-声音" ]
    priority: 90
    interval: 0.2
    handlers:
      - states: "[前台-青衣] & [自定义-青衣-醉花云月转,0,2.5]"  
        operations:  
          - op_name: "清除状态"
            state: "自定义-连携"
          - op_name: "按键-普通攻击"
            post_delay: 0.1
            repeat: 5
          - op_name: "设置状态"
            state: "自定义-青衣-特殊技续普攻"

      #这个实在不好用
      - states: "[前台-青衣] & [闪避识别-黄光] & ![自定义-下格挡,0,1] & [按键可用-快速支援,0,20]"
        operations:
          - op_name: "清除状态"
            state: "自定义-连携"
          - op_name: "按键-切换角色-下一个"
            post_delay: 0.05
          - op_name: "按键-普通攻击"
            post_delay: 0.1
            repeat: 10
          - op_name: "设置状态"
            state: "自定义-下格挡"
            
      - states: ""
        sub_handlers:
          - state_template: "闪A模板-全角色"

  - triggers: [ "按键可用-快速支援" ]
    priority: 60
    interval: 0.02
    handlers:
      - states: "[按键可用-快速支援]"
        operations:
          - op_name: "清除状态"
            state: "自定义-连携"
          - op_name: "按键-切换角色-下一个"
            post_delay: 0.1

  - triggers: [ "前台-血量扣减" ]
    interval: 1
    handlers:
      - states: "[前台-血量扣减]{1, 100} & ![自定义-动作不打断, 0, 999]"
        operations:
          # 由于每个角色的僵直不一样 由具体角色控制如何处理
          - op_name: "设置状态"
            state: "自定义-血量扣减"

  - triggers: ["前台-可琳"]
    priority: 2
    interval: 0.1
    handlers:
      - states: "[前台-可琳]"
        sub_handlers: *kl

  - triggers: ["前台-击破"]
    priority: 3
    interval: 0.02
    handlers:
      - states: "[前台-击破]"
        sub_handlers: *q

  - triggers: ["前台-支援"]
    priority: 1
    interval: 0.1
    handlers:
      - states: "[前台-支援]"
        sub_handlers: *zy