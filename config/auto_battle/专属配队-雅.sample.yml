# 基础信息
author: "笙梦昱"
thanks: "巡夜子 starlight"
homepage: "https://b23.tv/QBbqzRK"
version: "1.0"
team_list:
  - ["莱卡恩", "苍角", "雅"]
  - ["柳", "露西", "雅"]
introduction: ""

check_dodge_interval: 0.02
check_agent_interval: [0.4, 0.6]
check_special_attack_interval: [0.4, 0.6]
check_ultimate_interval: [0.4, 0.6]
check_chain_interval: [0.9, 1.1]
check_quick_interval: [0.9, 1.1]
auto_lock_interval: 5

# 连携技 上一个
t-chain-left: &t-chain-left
  - op_name: "按键-连携技-左"
  - op_name: "设置状态"
    state: "自定义-连携技换人"
  # 注意清除其他相关的换人状态
  - op_name: "清除状态"
    state_list: ["自定义-招架支援", "自定义-快速支援换人", "自定义-下场", "自定义-动作不打断"]

# 连携技 下一个
t-chain-right: &t-chain-right
  - op_name: "按键-连携技-右"
  - op_name: "设置状态"
    state: "自定义-连携技换人"
  # 注意清除其他相关的换人状态
  - op_name: "清除状态"
    state_list: ["自定义-招架支援", "自定义-快速支援换人", "自定义-下场", "自定义-动作不打断"]

# 招架支援-苍角
t-dodge-soukaku: &t-dodge-soukaku
  - op_name: "设置状态"
    state: "自定义-招架支援"
  - op_name: "设置状态"
    state: "自定义-原始朋克"
  - op_name: "按键-切换角色"
    agent_name: "苍角"
  # 注意清除其他相关的换人状态
  - op_name: "清除状态"
    state_list: ["自定义-连携技换人", "自定义-快速支援换人", "自定义-下场", "自定义-动作不打断"]

# 切换角色-苍角
t-switch-soukaku: &t-switch-soukaku
  - op_name: "按键-切换角色"
    agent_name: "苍角"
  # 注意清除其他相关的换人状态
  - op_name: "清除状态"
    state_list: ["自定义-招架支援", "自定义-连携技换人", "自定义-快速支援换人", "自定义-下场", "自定义-动作不打断"]
  - op_name: "等待秒数"
    seconds: 0.3

# 招架支援-露西
t-dodge-lucy: &t-dodge-lucy
  - op_name: "设置状态"
    state: "自定义-招架支援"
  - op_name: "按键-切换角色"
    agent_name: "露西"
  # 注意清除其他相关的换人状态
  - op_name: "清除状态"
    state_list: ["自定义-连携技换人", "自定义-快速支援换人", "自定义-下场", "自定义-动作不打断"]

# 切换角色-露西
t-switch-lucy: &t-switch-lucy
  - op_name: "按键-切换角色"
    agent_name: "露西"
  # 注意清除其他相关的换人状态
  - op_name: "清除状态"
    state_list: ["自定义-招架支援", "自定义-连携技换人", "自定义-快速支援换人", "自定义-下场", "自定义-动作不打断"]
  - op_name: "等待秒数"
    seconds: 0.3

# 招架支援-莱卡恩
t-dodge-lycaon: &t-dodge-lycaon
  - op_name: "设置状态"
    state: "自定义-招架支援"
  - op_name: "按键-切换角色"
    agent_name: "莱卡恩"
  # 注意清除其他相关的换人状态
  - op_name: "清除状态"
    state_list: ["自定义-连携技换人", "自定义-快速支援换人", "自定义-下场", "自定义-动作不打断"]

# 切换角色-莱卡恩
t-switch-lycaon: &t-switch-lycaon
  - op_name: "按键-切换角色"
    agent_name: "莱卡恩"
  # 注意清除其他相关的换人状态
  - op_name: "清除状态"
    state_list: ["自定义-招架支援", "自定义-连携技换人", "自定义-快速支援换人", "自定义-下场", "自定义-动作不打断"]
  - op_name: "等待秒数"
    seconds: 0.3

# 招架支援-柳
t-dodge-yanagi: &t-dodge-yanagi
  - op_name: "设置状态"
    state: "自定义-招架支援"
  - op_name: "按键-切换角色"
    agent_name: "柳"
  # 注意清除其他相关的换人状态
  - op_name: "清除状态"
    state_list: ["自定义-连携技换人", "自定义-快速支援换人", "自定义-下场", "自定义-动作不打断"]

# 切换角色-柳
t-switch-yanagi: &t-switch-yanagi
  - op_name: "按键-切换角色"
    agent_name: "柳"
  # 注意清除其他相关的换人状态
  - op_name: "清除状态"
    state_list: ["自定义-招架支援", "自定义-连携技换人", "自定义-快速支援换人", "自定义-下场", "自定义-动作不打断"]
  - op_name: "等待秒数"
    seconds: 0.3

# 招架支援-雅
t-dodge-miyabi: &t-dodge-miyabi
  - op_name: "设置状态"
    state: "自定义-招架支援"
  - op_name: "按键-切换角色"
    agent_name: "雅"
  # 注意清除其他相关的换人状态
  - op_name: "清除状态"
    state_list: ["自定义-连携技换人", "自定义-快速支援换人", "自定义-下场", "自定义-动作不打断"]

# 切换角色-雅
t-switch-miyabi: &t-switch-miyabi
  - op_name: "按键-切换角色"
    agent_name: "雅"
  # 注意清除其他相关的换人状态
  - op_name: "清除状态"
    state_list: ["自定义-招架支援", "自定义-连携技换人", "自定义-快速支援换人", "自定义-下场", "自定义-动作不打断"]
  - op_name: "等待秒数"
    seconds: 0.2

scenes:

  - triggers: [ "闪避识别-黄光", "闪避识别-红光", "闪避识别-声音" ]
    interval: 1
    handlers:
      # 部分连招霸体可以不闪避
      - states: "![自定义-动作不打断, 0, 30]"
        sub_handlers:
          - states: "[闪避识别-黄光]"
            sub_handlers:
              # 切苍角上BUFF
              - states: "[后台-苍角]"
                sub_handlers:
                  # 1命BUFF持续30s
                  - states: "![自定义-苍角-展旗, 0, 25]"
                    operations: *t-dodge-soukaku

              # 露西补buff 长按持续15秒 连携技持续10秒
              - states: "[后台-露西] & ![自定义-露西-加油, -5, 13]"
                operations: *t-dodge-lucy

                  # 连携技+1涡流 60能量发动特殊技 30能量+1涡流
                  # 平时准备着2个涡流 等连携时候可以直接展旗
#                  - states: "[苍角-涡流]{0,1} & [苍角-能量]{60, 120}"
#                    operations: *t-dodge-soukaku

              # 其余情况 
              - states: "[后台-雅]"
                operations: *t-dodge-miyabi
              - states: "[后台-莱卡恩]"
                operations: *t-dodge-lycaon
              - states: "[后台-柳]"
                operations: *t-dodge-yanagi
              # 其余情况 闪避
              - states: ""
                operations:
                  - op_name: "设置状态"
                    state: "自定义-闪避"
                  - op_name: "按键-闪避"
                    post_delay: 0.2

          # 闪避
          - states: ""
            operations:
              - op_name: "设置状态"
                state: "自定义-闪避"
              - op_name: "按键-闪避"
                post_delay: 0.2

  - triggers: [ "按键可用-快速支援" ]
    interval: 0.1
    handlers:
      - states: "[按键可用-快速支援]"
        sub_handlers:
          # 苍角展旗 需要释放长按
          - states: "[前台-苍角]"
            operations:
              - op_name: "设置状态"
                state: "自定义-苍角-展旗"
              - op_name: "按键-快速支援"
              - op_name: "按键-普通攻击"
                way: "松开"
              - op_name: "按键-特殊攻击"
                way: "松开"
              - op_name: "设置状态"
                state: "自定义-快速支援换人"
              - op_name: "清除状态"
                state: "自定义-动作不打断"
          - states: ""
            operations:
              - op_name: "按键-快速支援"
              - op_name: "设置状态"
                state: "自定义-快速支援换人"

  - triggers: [ "按键可用-连携技" ]
    interval: 1
    handlers:
      - states: "[按键可用-连携技]"
        sub_handlers:
          # 邦布的出场持续时间比较难评估
          - states: "[连携技-1-邦布]"
            operations:
              - op_name: "按键-连携技-左"
              - op_name: "清除状态"
                state: "自定义-动作不打断"
              - op_name: "清除状态"
                state: "自定义-下场"
              - op_name: "等待秒数"
                seconds: 3

          # 如果上一个是苍角而且上了buff 则切雅吃BUFF
          - states: "([连携技-1-雅] | [连携技-2-雅]) & [自定义-苍角-展旗, 0, 3]"
            sub_handlers:
            - states: "[连携技-1-雅]"
              operations: *t-chain-left
            - states: "[连携技-2-雅]"
              operations: *t-chain-right

          # 如果苍角能展旗 则切苍角
          # 连携技触发时 会有一段时间识别不到画面 因此相关状态识别需要延长时间范围
          - states: "([连携技-1-苍角] | [连携技-2-苍角]) & [苍角-涡流, 0, 10]{2, 3}"
            sub_handlers:
            - states: "[连携技-1-苍角]"
              operations: *t-chain-left
            - states: "[连携技-2-苍角]"
              operations: *t-chain-right

          # 剩余情况 莱卡恩-凯撒-苍角
          - states: "[连携技-1-雅]"
            operations: *t-chain-left
          - states: "[连携技-2-雅]"
            operations: *t-chain-right
          - states: "[连携技-1-莱卡恩]"
            operations: *t-chain-left
          - states: "[连携技-2-莱卡恩]"
            operations: *t-chain-right
          - states: "[连携技-1-柳]"
            operations: *t-chain-left
          - states: "[连携技-2-柳]"
            operations: *t-chain-right
          - states: "[连携技-1-苍角]"
            operations: *t-chain-left
          - states: "[连携技-2-苍角]"
            operations: *t-chain-right
          - states: "[连携技-1-露西]"
            operations: *t-chain-left
          - states: "[连携技-2-露西]"
            operations: *t-chain-right

  - triggers: [ ]
    interval: 0.02
    handlers:

      # 当前角色动作已经做完 可以切换角色了
      - states: "[自定义-下场]"
        sub_handlers:

          # 上苍角buff
          - states: "![自定义-苍角-展旗, 0, 25] & [后台-苍角]"
            sub_handlers:
              - states: "[苍角-涡流]{3, 3}"
                operations: *t-switch-soukaku

              - states: "[苍角-涡流]{1, 2} & [后台-苍角] & [苍角-能量]{60, 120}"
                operations: *t-switch-soukaku

              - states: "[苍角-涡流]{0, 0} & [后台-苍角] & [苍角-能量]{90, 120}"
                operations: *t-switch-soukaku

          - states: "![自定义-露西-加油, -5, 10] & [后台-露西] & [露西-能量]{65, 120}"
            operations: *t-switch-lucy

          # 切回雅
          - states: "[后台-雅]"
            sub_handlers:
              - states: "[雅-落霜]{6,6}"
                operations: *t-switch-miyabi
              - states: "[自定义-霜月拔刀,0,6]"
                operations: *t-switch-miyabi
          - states: "[自定义-霜月拔刀,0,6]"
            sub_handlers:
              - states: "[后台-柳]"
                operations: *t-switch-yanagi
              - states: "[后台-莱卡恩]"
                operations: *t-switch-lycaon


      # 苍角
      - states: "[前台-苍角]"
        interrupt_states: ["后台-苍角"]
        sub_handlers:
          - states: "[自定义-闪避]"
            operations:
              - op_name: "按键-普通攻击"
                post_delay: 0.1
                repeat: 10

          # 连携技出场会触发展旗 判断涡流是否足够上buff
          - states: "[自定义-连携技换人, 0, 6]"
            sub_handlers:
              - states: "[苍角-涡流, 0, 10]{3, 3}"
                operations:
                  - op_name: "设置状态"
                    state: "自定义-苍角-展旗"
              - states: ""
                operations:
                  - op_name: "等待秒数"
                    seconds: 0.1

          # 招架出场
          - states: "[自定义-招架支援]"
            sub_handlers:
              # 如果涡流足够 就长按普攻接展旗
              - states: "![自定义-苍角-展旗, 0, 25] & [苍角-涡流]{3, 3}"
                operations:
                  - op_name: "设置状态"
                    state: "自定义-动作不打断"
                  - op_name: "按键-普通攻击"
                    pre_delay: 0.1
                    post_delay: 0.1
                    repeat: 3
                  - op_name: "按键-普通攻击"
                    way: "按下"
                    post_delay: 5
                  - op_name: "设置状态"
                    state: "自定义-下场"
                  - op_name: "清除状态"
                    state: "自定义-动作不打断"
              # 涡流不够的话 就要攻击一段时间到招架支援结束
              - states: ""
                operations:
                  - op_name: "设置状态"
                    state: "自定义-动作不打断"
                  - op_name: "按键-普通攻击"
                    post_delay: 0.1
                    repeat: 30
                  - op_name: "按键-闪避"
                    post_delay: 0.1
                  - op_name: "清除状态"
                    state: "自定义-动作不打断"

          - states: "[按键可用-终结技]"
            operations:
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "按键-终结技"
                post_delay: 0.1
                repeat: 10
              - op_name: "等待秒数"
                seconds: 3.6
              - op_name: "清除状态"
                state: "自定义-动作不打断"

          # BUFF到期了 尝试展旗
          - states: "![自定义-苍角-展旗, 0, 25]"
            sub_handlers:
              # 涡流足够的话 直接展旗
              - states: "[苍角-涡流]{3, 3}"
                operations:
                  - op_name: "设置状态"
                    state: "自定义-动作不打断"
                  - op_name: "按键-特殊攻击"
                    way: "按下"
                    post_delay: 3.5
                  - op_name: "设置状态"
                    state: "自定义-下场"
                  - op_name: "清除状态"
                    state: "自定义-动作不打断"
              # 其他情况 如能能量足够补充涡流 就打强化特殊技补充涡流
              # 但由于可能识别错误
              - states: "[前台-能量]{60, 120} & [苍角-涡流]{2, 2}"
                operations:
                  - op_name: "设置状态"
                    state: "自定义-动作不打断"
                  - op_name: "按键-特殊攻击"
                    post_delay: 0.2
                    repeat: 2
                  - op_name: "按键-特殊攻击"
                    way: "按下"
                    post_delay: 3.5
                  - op_name: "设置状态"
                    state: "自定义-下场"
                  - op_name: "清除状态"
                    state: "自定义-动作不打断"
              # 普通情况下 如能能量足够补充涡流 就打强化特殊技
              - states: "[前台-能量]{60, 120} & [苍角-涡流]{1, 1}"
                operations:
                  - op_name: "设置状态"
                    state: "自定义-动作不打断"
                  - op_name: "按键-特殊攻击"
                    post_delay: 0.2
                    repeat: 5
                  - op_name: "按键-特殊攻击"
                    way: "按下"
                    post_delay: 3.5
                  - op_name: "设置状态"
                    state: "自定义-下场"
                  - op_name: "清除状态"
                    state: "自定义-动作不打断"
              # 普通情况下 如能能量足够补充涡流 就打强化特殊技
              - states: "[前台-能量]{90, 120} & [苍角-涡流]{0, 0}"
                operations:
                  - op_name: "设置状态"
                    state: "自定义-动作不打断"
                  - op_name: "按键-特殊攻击"
                    post_delay: 0.2
                    repeat: 10
                  - op_name: "按键-特殊攻击"
                    way: "按下"
                    post_delay: 3.5
                  - op_name: "设置状态"
                    state: "自定义-下场"
                  - op_name: "清除状态"
                    state: "自定义-动作不打断"

          # BUFF没到期 先存2个涡流等连携技
          - states: "[苍角-能量]{60, 120}"
            sub_handlers:
              - states: "[苍角-涡流]{0, 0}"
                operations:
                  - op_name: "设置状态"
                    state: "自定义-动作不打断"
                  - op_name: "按键-特殊攻击"
                    post_delay: 0.2
                    repeat: 10
                  - op_name: "设置状态"
                    state: "自定义-下场"
                  - op_name: "清除状态"
                    state: "自定义-动作不打断"
              - states: "[苍角-涡流]{1, 1}"
                operations:
                  - op_name: "设置状态"
                    state: "自定义-动作不打断"
                  - op_name: "按键-特殊攻击"
                    post_delay: 0.2
                    repeat: 5
                  - op_name: "设置状态"
                    state: "自定义-下场"
                  - op_name: "清除状态"
                    state: "自定义-动作不打断"

          # 剩余情况 可以直接下场
          - states: ""
            operations:
              - op_name: "按键-普通攻击"
                post_delay: 0.2
              - op_name: "设置状态"
                state: "自定义-下场"

      # 露西
      - states: "[前台-露西]"
        interrupt_states: ["后台-露西"]
        sub_handlers:
          - states: "[自定义-闪避]"
            operations:
              - op_name: "按键-普通攻击"
                post_delay: 0.2
                repeat: 2
              - op_name: "等待秒数"
                seconds: 1

          - states: "[自定义-快速支援换人]"
            operations:
              - op_name: "按键-普通攻击"
                pre_delay: 0.15
                post_delay: 0.15
                repeat: 5

          - states: "[自定义-招架支援]"
            operations:
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "按键-普通攻击"
                post_delay: 0.05
                repeat: 28
              - op_name: "等待秒数"
                seconds: 1
              - op_name: "清除状态"
                state: "自定义-动作不打断"

          - states: "[自定义-连携技换人]"
            operations:
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "等待秒数"
                seconds: 2
              # 连携技buff只有10秒 因此需要设置buff时间提前
              - op_name: "设置状态"
                state: "自定义-露西-加油"
                seconds: -5
              - op_name: "清除状态"
                state: "自定义-动作不打断"

          - states: "[按键可用-终结技]"
            operations:
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "按键-终结技"
                post_delay: 0.1
                repeat: 10
              - op_name: "等待秒数"
                seconds: 3.6
              - op_name: "清除状态"
                state: "自定义-动作不打断"
              - op_name: "设置状态"
                state: "自定义-下场"

          - states: "[露西-能量]{65, 120} & ![自定义-露西-加油, -5, 10]"
            operations:
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "等待秒数"
                state: 1
              - op_name: "按键-特殊攻击"
                post_delay: 0.3
                repeat: 5
              - op_name: "设置状态"
                state: "自定义-下场"
              # 击飞到落地还有一段距离 需要在一段时间后再设置buff时间
              - op_name: "设置状态"
                state: "自定义-露西-加油"
                seconds: 1.5
              - op_name: "清除状态"
                state: "自定义-动作不打断"

          - states: ""
            operations:
              - op_name: "按键-普通攻击"
                post_delay: 0.05
                repeat: 2
              - op_name: "设置状态"
                state: "自定义-下场"

      # 莱卡恩
      - states: "[前台-莱卡恩]"
        interrupt_states: ["后台-莱卡恩"]
        sub_handlers:
          - states: "[自定义-闪避]"
            operations:
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "按键-普通攻击"
                post_delay: 0.1
                repeat: 3
              - op_name: "等待秒数"
                seconds: 0.6
              - op_name: "清除状态"
                state: "自定义-动作不打断"

          - states: "[自定义-招架支援]"
            operations:
              - op_name: "按键-普通攻击"
                pre_delay: 0.2
                post_delay: 0.2
                repeat: 3
              - op_name: "等待秒数"
                seconds: 1

          - states: "[自定义-连携技换人]"
            operations:
              - op_name: "等待秒数"
                seconds: 2.5

          - states: "[自定义-快速支援换人]"
            operations:
              - op_name: "等待秒数"
                post_delay: 0.2

          # 终结技 防止切换角色没切对 等一段时间再使用终结技
          - states: "[按键可用-终结技]"
            operations:
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "按键-终结技"
                post_delay: 0.1
                repeat: 10
              - op_name: "等待秒数"
                seconds: 3.6
              - op_name: "清除状态"
                state: "自定义-动作不打断"

          # 强化特殊技 刚出场时候容易打不出来 先等等
          - states: "[前台-能量]{60, 120}"
            operations:
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "按键-特殊攻击"
                way: "按下"
                press: 0.3
                post_delay: 0.2
              - op_name: "按键-特殊攻击"
                way: "按下"
                press: 0.3
                post_delay: 1.6
              - op_name: "设置状态"
                state: "自定义-下场"
              - op_name: "清除状态"
                state: "自定义-动作不打断"

          - states: ""
            operations:
              - op_name: "按键-普通攻击"
                way: "按下"
                press: 0.3
                post_delay: 0.8
              - op_name: "按键-普通攻击"
                way: "按下"
                press: 0.3
                post_delay: 0.8
              - op_name: "按键-普通攻击"
                way: "按下"
                press: 0.6
              - op_name: "设置状态"
                state: "自定义-下场"

      # 柳
      - states: "[前台-柳]"
        interrupt_states: ["后台-柳"]
        sub_handlers:
          - states: "[自定义-闪避]"
            operations:
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "按键-普通攻击"
                post_delay: 0.1
                repeat: 3
              - op_name: "等待秒数"
                seconds: 0.6
              - op_name: "清除状态"
                state: "自定义-动作不打断"

          - states: "[自定义-招架支援]"
            operations:
              - op_name: "按键-普通攻击"
                pre_delay: 0.2
                post_delay: 0.2
                repeat: 3
              - op_name: "等待秒数"
                seconds: 1

          - states: "[自定义-连携技换人]"
            operations:
              - op_name: "等待秒数"
                seconds: 2.5

          - states: "[自定义-快速支援换人]"
            operations:
              - op_name: "等待秒数"
                post_delay: 0.2

          - states: "[按键可用-终结技]"
            operations:
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "按键-终结技"
                post_delay: 0.1
                repeat: 10
              - op_name: "等待秒数"
                seconds: 3.6
              - op_name: "清除状态"
                state: "自定义-动作不打断"
              - op_name: "设置状态"
                state: "自定义-下场"

          - states: "[柳-能量]{45,120}"
            operations:
              - op_name: "设置状态"
                state_list: ["自定义-动作不打断", "自定义-柳-月蚀"]
              - op_name: "按键-特殊攻击"
                way: "按下"
                post_delay: 2
              - op_name: "清除状态"
                state: "自定义-动作不打断"
              - op_name: "设置状态"
                state: "自定义-下场"

          - states: ""
            operations:
              - op_name: "按键-普通攻击"
                post_delay: 0.05
                repeat: 14
              - op_name: "按键-特殊攻击"
                post_delay: 0.05
                repeat: 1
              - op_name: "按键-普通攻击"
                post_delay: 0.05
                repeat: 14
              - op_name: "按键-特殊攻击"
                post_delay: 0.05
                repeat: 2
              - op_name: "设置状态"
                state: "自定义-下场"

      # 雅
      - states: "[前台-雅]"
        interrupt_states: ["后台-雅"]
        sub_handlers:
          - states: "[自定义-闪避]"
            operations:
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "按键-普通攻击"
                post_delay: 0.1
                repeat: 3
              - op_name: "等待秒数"
                seconds: 0.6
              - op_name: "清除状态"
                state: "自定义-动作不打断"

          - states: "[自定义-招架支援]"
            operations:
              - op_name: "按键-普通攻击"
                pre_delay: 0.2
                post_delay: 0.2
                repeat: 3
              - op_name: "等待秒数"
                seconds: 1

          - states: "[自定义-连携技换人]"
            operations:
              - op_name: "等待秒数"
                seconds: 2.5

          - states: "[自定义-快速支援换人]"
            operations:
              - op_name: "等待秒数"
                post_delay: 0.2

          # 看看有没有buff需要上 注意刚切换上场的时候可能无法在做动作无法切人 稍微等一段时间
          - states: "![切换角色-雅]"
            sub_handlers:

              # 上苍角buff
              - states: "![自定义-苍角-展旗, 0, 25] & [后台-苍角]"
                sub_handlers:
                  - states: "[苍角-涡流]{3, 3}"
                    operations: *t-switch-soukaku

                  - states: "[苍角-涡流]{1, 2} & [后台-苍角] & [苍角-能量]{60, 120}"
                    operations: *t-switch-soukaku

                  - states: "[苍角-涡流]{0, 0} & [后台-苍角] & [苍角-能量]{90, 120}"
                    operations: *t-switch-soukaku

              - states: "![自定义-露西-加油, -5, 10] & [后台-露西] & [露西-能量]{65, 120}"
                operations: *t-switch-lucy

          - states: "[雅-落霜]{6,6}"
            operations: 
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "按键-普通攻击"
                way: "按下"
                press: 2
                post_delay: 0.8
              - op_name: "设置状态"
                state_list: ["自定义-下场", 自定义-霜月拔刀]
              - op_name: "清除状态"
                state: "自定义-动作不打断"

          - states: "[雅-落霜]{0,3} & [按键可用-终结技]"
            operations:
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "按键-终结技"
                post_delay: 0.1
                repeat: 20
              - op_name: "等待秒数"
                seconds: 2.4
              - op_name: "清除状态"
                state: "自定义-动作不打断"

          - states: "[雅-能量]{45,120} & [雅-落霜]{0,5}"
            operations:
              - op_name: "设置状态"
                state: "自定义-动作不打断"
              - op_name: "按键-特殊攻击"
                post_delay: 0.5
              - op_name: "清除状态"
                state: "自定义-动作不打断"

          - states: ""
            operations:
              - op_name: "按键-普通攻击"
                post_delay: 0.05
                repeat: 7




