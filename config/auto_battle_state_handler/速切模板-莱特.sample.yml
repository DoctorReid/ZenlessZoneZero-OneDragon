#作者 火
handlers:
  - states: "[前台-莱特]"
    sub_handlers:
      # 刚切换角色的前置处理
      - states: "[按键-切换角色-下一个,0,0.4]"
        operations:
          - op_name: "按键-普通攻击"
            post_delay: 0.1
            repeat: 4

      # 优先把士气用够，因为不好估算层数，就以能量值为限
      - states: "[自定义-莱特-欧拉欧拉, 0, 30]"
        sub_handlers:
          - states: "[莱特-士气]{0, 70}"
            operations:
              - op_name: "清除状态"
                state_list: ["自定义-莱特-欧拉欧拉", "自定义-动作不打断"]
              - op_name: "设置状态"
                state: "自定义-莱特-BUFF"
              - op_name: "按键-切换角色-下一个"
          - states: ""
            operations:
              - op_name: "按键-普通攻击"
                post_delay: 0.1

      - states: "[自定义-闪避]"
        sub_handlers:
          - states: "[莱特-士气]{80, 100}"
            operations:
              - op_name: "设置状态"
                state_list: ["自定义-莱特-欧拉欧拉", "自定义-动作不打断"]
          - states: ""
            operations:
              - op_name: "按键-普通攻击"
                post_delay: 0.2
                repeat: 8
              - op_name: "等待秒数"
                seconds: 0.5
              - op_name: "按键-切换角色-下一个"

      - states: "[自定义-快速支援换人]"
        sub_handlers:
          - states: "[莱特-士气]{80, 100}"
            operations:
              - op_name: "设置状态"
                state_list: ["自定义-莱特-欧拉欧拉", "自定义-动作不打断"]
          - states: ""
            operations:
              - op_name: "按键-普通攻击"
                post_delay: 0.2
                repeat: 8
              - op_name: "等待秒数"
                seconds: 0.5
              - op_name: "按键-切换角色-下一个"

      - states: "[自定义-招架支援]"
        sub_handlers:
          - states: "[莱特-士气]{80, 100}"
            operations:
              - op_name: "设置状态"
                state_list: ["自定义-莱特-欧拉欧拉", "自定义-动作不打断"]
          - states: ""
            operations:
              - op_name: "按键-普通攻击"
                post_delay: 0.2
                repeat: 8
              - op_name: "等待秒数"
                seconds: 0.5
              - op_name: "按键-切换角色-下一个"

      - states: "[自定义-连携技换人]"
        sub_handlers:
          - states: "[莱特-士气]{80, 100}"
            operations:
              - op_name: "设置状态"
                state_list: ["自定义-莱特-欧拉欧拉", "自定义-动作不打断"]
          - states: ""
            operations:
              - op_name: "等待秒数"
                seconds: 3
              - op_name: "按键-切换角色-下一个"

      # 士气够了就放BUFF
      - states: "[莱特-士气]{80, 100}"
        operations:
          - op_name: "设置状态"
            state_list: ["自定义-莱特-欧拉欧拉", "自定义-动作不打断"]

      # Q技能
      - states: "[按键可用-终结技] & ![自定义-动作不打断, 0, 30]"
        operations:
          - op_name: "设置状态"
            state: "自定义-动作不打断"
          - op_name: "按键-终结技"
            post_delay: 1
            repeat: 3
          - op_name: "清除状态"
            state: "自定义-动作不打断"
      # E技能
      - states: "[按键可用-特殊攻击]"
        operations:
          - op_name: "设置状态"
            state: "自定义-动作不打断"
          - op_name: "按键-移动-前"
            way: "按下"
          - op_name: "按键-普通攻击"
            post_delay: 0.2
          - op_name: "按键-闪避"
            post_delay: 0.2
          - op_name: "按键-特殊攻击"
            post_delay: 0.2
          - op_name: "按键-普通攻击"
            post_delay: 0.2
            repeat: 8
          - op_name: "按键-移动-前"
            way: "松开"
          - op_name: "等待秒数"
            seconds: 0.5
          - op_name: "清除状态"
            state: "自定义-动作不打断"
          - op_name: "按键-切换角色-下一个"

      # 加不了BUFF也没有技能，不普通攻击，直接下场
      - states: ""
        operations:
          - op_name: "按键-切换角色-下一个"