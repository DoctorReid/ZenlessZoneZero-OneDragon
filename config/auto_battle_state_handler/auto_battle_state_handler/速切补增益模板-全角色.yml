# 根据情况切人，防止过度切人 <-![自定义-连携换人,0,12] & ![前台-青衣] & [青衣-能量]{0, 120} & ![自定义-黄光切人, 0, 3]<-[自定义-速切结束,0,12]
handlers:
  - states: "[自定义-速切结束,0,12]"
    sub_handlers:
      # 大哥青衣在你们也有脸站场吗？
      - states: "![自定义-连携换人,0,12] & ![前台-青衣] & [青衣-能量]{0, 120} & ![自定义-黄光切人, 0, 3]" #给队友时间稍微E一下
        operations:
          - op_name: "按键-切换角色"
            agent_name: "青衣"
          - op_name: "清除状态"
            state_list: ["自定义-速切结束", "自定义-动作不打断"]
            
      # 星见雅 有6豆就切过去
      - states: "[雅-落霜]{6, 6} & ![前台-雅]"
        operations:
          - op_name: "按键-切换角色"
            agent_name: "雅"
          - op_name: "清除状态"
            state_list: ["自定义-速切结束", "自定义-动作不打断"]

      # 失衡期间，妮可要补BUFF
      - states: "([妮可-特殊技可用] | [妮可-终结技可用])  & ![自定义-妮可-能量场,-5,3.5] & [自定义-连携换人,6,12] & ![前台-妮可]"
        operations:
          - op_name: "按键-切换角色"
            agent_name: "妮可"
          - op_name: "清除状态"
            state_list: ["自定义-速切结束", "自定义-动作不打断"]

      #青衣大哥在你们就别切人了
      - states: "[自定义-连携换人,0,12] & ![前台-青衣] & [青衣-能量]{0, 120}"
        operations:
          - op_name: "清除状态"
            state_list: ["自定义-速切结束", "自定义-动作不打断"]

      # 没有上面的几位高贵，就藏这里好了
      - states: ""
        sub_handlers:

          - states: "![前台-赛斯]"
            sub_handlers:
            - states: "( [赛斯-能量]{85, 121} | [赛斯-意气]{95, 101} ) & ![自定义-赛斯-意气风发,0,20]"
              operations:
                - op_name: "按键-切换角色"
                  agent_name: "赛斯"
                - op_name: "清除状态"
                  state_list: ["自定义-速切结束", "自定义-动作不打断"]

          - states: "![前台-本]"
            sub_handlers:
            - states: "[本-特殊技可用] & ![自定义-本-守卫,0,20]"
              operations:
                - op_name: "按键-切换角色"
                  agent_name: "本"
                - op_name: "清除状态"
                  state_list: ["自定义-速切结束", "自定义-动作不打断"]

          - states: "![前台-凯撒]"
            sub_handlers:
            - states: "[凯撒-特殊技可用] & ([自定义-血量扣减,0,3] | ![自定义-凯撒-护盾,0,20]) | "
              operations:
                - op_name: "按键-切换角色"
                  agent_name: "凯撒"
                - op_name: "清除状态"
                  state_list: ["自定义-血量扣减","自定义-速切结束", "自定义-动作不打断"]

            - states: "[凯撒-终结技可用] & ![自定义-连携换人,0,12]"
              operations:
                - op_name: "按键-切换角色"
                  agent_name: "凯撒"
                - op_name: "清除状态"
                  state_list: ["自定义-血量扣减","自定义-速切结束", "自定义-动作不打断"]

          - states: "![前台-莱特]"
            sub_handlers:
            - states: "[莱特-能量]{80, 120} | ![自定义-莱特-BUFF, 0, 15] & [莱特-士气]{80, 100}"
              operations:
                - op_name: "按键-切换角色"
                  agent_name: "莱特"
                - op_name: "清除状态"
                  state_list: ["自定义-速切结束", "自定义-动作不打断"]

          - states: "![前台-莱卡恩]"
            sub_handlers:
            - states: "[莱卡恩-特殊技可用]"
              operations:
                - op_name: "按键-切换角色"
                  agent_name: "莱卡恩"
                - op_name: "清除状态"
                  state_list: ["自定义-速切结束", "自定义-动作不打断"]

          - states: "![前台-苍角]"
            sub_handlers:
            - states: "[苍角-特殊技可用]"
              operations:
                - op_name: "按键-切换角色"
                  agent_name: "苍角"
                - op_name: "清除状态"
                  state_list: ["自定义-速切结束", "自定义-动作不打断"]

          - states: "![前台-丽娜]"
            sub_handlers:
            - states: "[丽娜-能量]{0, 120}"
              operations:
                - op_name: "按键-切换角色"
                  agent_name: "丽娜"
                - op_name: "清除状态"
                  state_list: ["自定义-速切结束", "自定义-动作不打断"]

          - states: "![前台-露西]"
            sub_handlers:
            - states: "([露西-特殊技可用] | [露西-终结技可用])"
              operations:
                - op_name: "按键-切换角色"
                  agent_name: "露西"
                - op_name: "清除状态"
                  state_list: ["自定义-速切结束", "自定义-动作不打断"]

          - states: "![前台-妮可]"
            sub_handlers:
            - states: "([妮可-特殊技可用] | [妮可-终结技可用])  & ![自定义-妮可-能量场,-5,3.5]"
              operations:
                - op_name: "按键-切换角色"
                  agent_name: "妮可"
                - op_name: "清除状态"
                  state_list: ["自定义-速切结束", "自定义-动作不打断"]

          - states: "![前台-柏妮思]"
            sub_handlers:
            - states: "([柏妮思-特殊技可用] & [柏妮思-燃点]{0,40}) | (![自定义-柏妮思-灼烧,0,12] & [柏妮思-燃点]{60,100})"
              operations:
                - op_name: "按键-切换角色"
                  agent_name: "柏妮思"
                - op_name: "清除状态"
                  state_list: ["自定义-速切结束", "自定义-动作不打断"]

          - states: "![前台-柳]"
            sub_handlers:
            - states: "[柳-特殊技可用]"
              operations:
                - op_name: "按键-切换角色"
                  agent_name: "柳"
                - op_name: "清除状态"
                  state_list: ["自定义-速切结束", "自定义-动作不打断"]


          #能量要溢出了兄弟
          - states: "![后台-2-异常] & ![后台-2-强攻] & [后台-2-能量]{110,120}"
            operations:
              - op_name: "按键-切换角色-上一个"
                post_delay: 0.1
              - op_name: "清除状态"
                state_list: ["自定义-速切结束", "自定义-动作不打断"]

          - states: "![后台-1-异常] & ![后台-1-强攻] & [后台-1-能量]{110,120}"
            operations:
              - op_name: "按键-切换角色-下一个"
                post_delay: 0.1
              - op_name: "清除状态"
                state_list: ["自定义-速切结束", "自定义-动作不打断"]

          #不是输出没必要切出来
          - states: "[后台-1-异常]"
            operations:
              - op_name: "按键-切换角色-上一个"
                post_delay: 0.1
              - op_name: "清除状态"
                state_list: ["自定义-速切结束", "自定义-动作不打断"]

          - states: "[后台-2-异常]"
            operations:
              - op_name: "按键-切换角色-下一个"
                post_delay: 0.1
              - op_name: "清除状态"
                state_list: ["自定义-速切结束", "自定义-动作不打断"]

          - states: "[后台-1-强攻]"
            operations:
              - op_name: "按键-切换角色-上一个"
                post_delay: 0.1
              - op_name: "清除状态"
                state_list: ["自定义-速切结束", "自定义-动作不打断"]

          - states: "[后台-2-强攻]"
            operations:
              - op_name: "按键-切换角色-下一个"
                post_delay: 0.1
              - op_name: "清除状态"
                state_list: ["自定义-速切结束", "自定义-动作不打断"]

          #苍角主C怎么了？
          - states: "![前台-强攻] & ![前台-异常] & [苍角-能量]{20, 120}"
            operations:
              - op_name: "按键-切换角色"
                agent_name: "苍角"
              - op_name: "清除状态"
                state_list: ["自定义-速切结束", "自定义-动作不打断"]
    